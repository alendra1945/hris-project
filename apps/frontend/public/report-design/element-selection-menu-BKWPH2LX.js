import{u as e,c as t,i as o,h as r,a9 as s,n as i,k as l,y as n,j as d,v as g,t as a,M as v,aa as u,d as c,q as y,w as p,a as h,o as m,f as k,s as b,z as w,F as f}from"./reporting-template-design-web-C1jkFslm.js";import{C as P,d as S,a as x,b as $,c as C}from"./context-menu-Bxr69ITp.js";import{c as M,e as E,h as L}from"./index-n8EjtbSE.js";import{u as D}from"./use-supported-B7CxH-45.js";import"./index-Dfg5pT9a.js";var z=a("<div>"),R=a('<div class="gkvis-m-auto gkvis-text-sm gkvis-text-white">'),T=a('<div><div class="padding-handler gkvis-pointer-events-none gkvis-absolute gkvis-flex gkvis-w-full gkvis-bg-rose-200"></div><div class="padding-handler gkvis-pointer-events-none gkvis-absolute gkvis-bottom-0 gkvis-flex gkvis-w-full gkvis-bg-rose-200"></div><div class="padding-handler gkvis-pointer-events-none gkvis-absolute gkvis-left-0 gkvis-flex gkvis-h-full gkvis-bg-rose-200"></div><div class="padding-handler gkvis-pointer-events-none gkvis-absolute gkvis-right-0 gkvis-flex gkvis-h-full gkvis-bg-rose-200">');const I=g=>{const[a,{history:y}]=e(),[p,h]=t(!1),m=()=>g.block,k=()=>a.documentState.canvasBuilder,b=e=>(m().getStyle("padding-right"),m().getStyle("padding-top"),m().getStyle("padding-bottom"),m().getStyle("padding-left"),m().getStyle("padding"),u(getComputedStyle(m().node)[`padding${e}`])*k().scale),w=()=>l(v(1*k().scale,1,2)),f=()=>{const e=v(16*k().scale,8,32);return{width:e,height:v(4*k().scale,2,8),bottom:`clamp(-20px, calc(-6px * ${k().scale}), -8px)`,left:`calc(50% - ${e/2}px)`}},P=()=>{const e=v(16*k().scale,8,32);return{width:e,height:v(4*k().scale,2,8),top:`clamp(-20px, calc(-6px * ${k().scale}), -8px)`,left:`calc(50% - ${e/2}px)`}},S=()=>{const e=v(4*k().scale,2,8),t=v(16*k().scale,8,32);return{width:e,height:t,right:`clamp(-20px, calc(-6px * ${k().scale}), -8px)`,top:`calc(50% - ${t/2}px)`}},x=()=>{const e=v(4*k().scale,2,8),t=v(16*k().scale,8,32);return{width:e,height:t,left:`clamp(-20px, calc(-6px * ${k().scale}), -8px)`,top:`calc(50% - ${t/2}px)`}},$=(e,t)=>{if(e.stopPropagation(),g.disableHandlers)return;h(!0);const o=e.clientY,r=e.clientX,i=e.target,n=u(m().getStyles["padding-top"])||5,d=u(m().getStyles["padding-bottom"])||5,a=u(m().getStyles["padding-left"])||5,v=u(m().getStyles["padding-right"])||5,p=document.body.style.cursor;document.body.style.cursor=window.getComputedStyle(i).cursor;const k=e=>{y.pause(),e.stopPropagation(),c((()=>{let i=0,g=null;t===s.Top?(i=Math.max(n+e.clientY-o,0),m().setStyle("padding-top",l(i)),g="y"):t===s.Bottom?(i=Math.max(d+o-e.clientY,0),m().setStyle("padding-bottom",l(i)),g="y"):t===s.Left?(i=Math.max(a+e.clientX-r,0),m().setStyle("padding-left",l(i)),g="x"):t===s.Right&&(i=Math.max(v+r-e.clientX,0),m().setStyle("padding-right",l(i)),g="x"),e.altKey?"y"===g?(m().setStyle("padding-top",l(i)),m().setStyle("padding-bottom",l(i))):"x"===g&&(m().setStyle("padding-left",l(i)),m().setStyle("padding-right",l(i))):e.shiftKey&&(m().setStyle("padding-top",l(i)),m().setStyle("padding-bottom",l(i)),m().setStyle("padding-left",l(i)),m().setStyle("padding-right",l(i)))})),e.preventDefault(),e.stopPropagation()};document.addEventListener("mousemove",k),document.addEventListener("mouseup",(e=>{y.resume(),document.body.style.cursor=p,document.removeEventListener("mousemove",k),h(!1),e.preventDefault()}),{once:!0})};return C=T(),E=C.firstChild,L=E.nextSibling,D=L.nextSibling,I=D.nextSibling,C.$$click=e=>e.stopPropagation(),o(E,r(d,{get when(){return k().scale>.5},get children(){var e=z();return e.$$mousedown=e=>$(e,s.Top),i((t=>{var o=M("gkvis-pointer-events-auto gkvis-absolute gkvis-left-[50%] gkvis-rounded-full gkvis-border-2 gkvis-border-rose-500 gkvis-bg-rose-200 hover:gkvis-scale-125",{"gkvis-cursor-ns-resize":!g.disableHandlers,"gkvis-hidden":p()}),r=w(),s=f().bottom,i=f().left,d=l(f().height),a=l(f().width);return o!==t.e&&n(e,t.e=o),r!==t.t&&(null!=(t.t=r)?e.style.setProperty("border-width",r):e.style.removeProperty("border-width")),s!==t.a&&(null!=(t.a=s)?e.style.setProperty("bottom",s):e.style.removeProperty("bottom")),i!==t.o&&(null!=(t.o=i)?e.style.setProperty("left",i):e.style.removeProperty("left")),d!==t.i&&(null!=(t.i=d)?e.style.setProperty("height",d):e.style.removeProperty("height")),a!==t.n&&(null!=(t.n=a)?e.style.setProperty("width",a):e.style.removeProperty("width")),t}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),o(E,r(d,{get when(){return p()},get children(){var e=R();return o(e,(()=>m().getStyles["padding-top"])),e}}),null),o(L,r(d,{get when(){return k().scale>.5},get children(){var e=z();return e.$$mousedown=e=>$(e,s.Bottom),i((t=>{var o=M("gkvis-pointer-events-auto gkvis-absolute gkvis-left-[50%] gkvis-rounded-full gkvis-border-2 gkvis-border-rose-500 gkvis-bg-rose-200 hover:gkvis-scale-125",{"gkvis-cursor-ns-resize":!g.disableHandlers,"gkvis-hidden":p()}),r=w(),s=P().top,i=P().left,d=l(P().height),a=l(P().width);return o!==t.e&&n(e,t.e=o),r!==t.t&&(null!=(t.t=r)?e.style.setProperty("border-width",r):e.style.removeProperty("border-width")),s!==t.a&&(null!=(t.a=s)?e.style.setProperty("top",s):e.style.removeProperty("top")),i!==t.o&&(null!=(t.o=i)?e.style.setProperty("left",i):e.style.removeProperty("left")),d!==t.i&&(null!=(t.i=d)?e.style.setProperty("height",d):e.style.removeProperty("height")),a!==t.n&&(null!=(t.n=a)?e.style.setProperty("width",a):e.style.removeProperty("width")),t}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),o(L,r(d,{get when(){return p()},get children(){var e=R();return o(e,(()=>m().getStyles["padding-bottom"])),e}}),null),o(D,r(d,{get when(){return k().scale>.5},get children(){var e=z();return e.$$mousedown=e=>$(e,s.Left),i((t=>{var o=M("gkvis-pointer-events-auto gkvis-absolute gkvis-top-[50%] gkvis-rounded-full gkvis-border-2 gkvis-border-rose-500 gkvis-bg-rose-200 hover:gkvis-scale-125",{"gkvis-cursor-ew-resize":!g.disableHandlers,"gkvis-hidden":p()}),r=w(),s=S().right,i=S().top,d=l(S().height),a=l(S().width);return o!==t.e&&n(e,t.e=o),r!==t.t&&(null!=(t.t=r)?e.style.setProperty("border-width",r):e.style.removeProperty("border-width")),s!==t.a&&(null!=(t.a=s)?e.style.setProperty("right",s):e.style.removeProperty("right")),i!==t.o&&(null!=(t.o=i)?e.style.setProperty("top",i):e.style.removeProperty("top")),d!==t.i&&(null!=(t.i=d)?e.style.setProperty("height",d):e.style.removeProperty("height")),a!==t.n&&(null!=(t.n=a)?e.style.setProperty("width",a):e.style.removeProperty("width")),t}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),o(D,r(d,{get when(){return p()},get children(){var e=R();return o(e,(()=>m().getStyles["padding-left"])),e}}),null),o(I,r(d,{get when(){return k().scale>.5},get children(){var e=z();return e.$$mousedown=e=>$(e,s.Right),i((t=>{var o=M("gkvis-pointer-events-auto gkvis-absolute gkvis-top-[50%] gkvis-rounded-full gkvis-border-2 gkvis-border-rose-500 gkvis-bg-rose-200 hover:gkvis-scale-125",{"gkvis-cursor-ew-resize":!g.disableHandlers,"gkvis-hidden":p()}),r=w(),s=x().left,i=x().top,d=l(x().height),a=l(x().width);return o!==t.e&&n(e,t.e=o),r!==t.t&&(null!=(t.t=r)?e.style.setProperty("border-width",r):e.style.removeProperty("border-width")),s!==t.a&&(null!=(t.a=s)?e.style.setProperty("left",s):e.style.removeProperty("left")),i!==t.o&&(null!=(t.o=i)?e.style.setProperty("top",i):e.style.removeProperty("top")),d!==t.i&&(null!=(t.i=d)?e.style.setProperty("height",d):e.style.removeProperty("height")),a!==t.n&&(null!=(t.n=a)?e.style.setProperty("width",a):e.style.removeProperty("width")),t}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),o(I,r(d,{get when(){return p()},get children(){var e=R();return o(e,(()=>m().getStyles["padding-right"])),e}}),null),i((e=>{var t=M("group",{"gkvis-opacity-40":!p(),"gkvis-opacity-70":p()}),o=l(b("Top")),r=l(b("Bottom")),s=l(b("Left")),i=l(b("Right"));return t!==e.e&&n(C,e.e=t),o!==e.t&&(null!=(e.t=o)?E.style.setProperty("height",o):E.style.removeProperty("height")),r!==e.a&&(null!=(e.a=r)?L.style.setProperty("height",r):L.style.removeProperty("height")),s!==e.o&&(null!=(e.o=s)?D.style.setProperty("width",s):D.style.removeProperty("width")),i!==e.i&&(null!=(e.i=i)?I.style.setProperty("width",i):I.style.removeProperty("width")),e}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),C;var C,E,L,D,I};g(["click","mousedown"]);var B=a('<span class="resize-dimensions gkvis-absolute gkvis-bottom-[-40px] gkvis-right-[-40px] gkvis-flex gkvis-h-8 gkvis-w-30 gkvis-items-center gkvis-justify-center gkvis-whitespace-nowrap gkvis-rounded-full gkvis-bg-gray-600 gkvis-p-2 gkvis-text-sm gkvis-text-white gkvis-opacity-80"> <!> '),H=a('<div class="gkvis-pointer-events-auto gkvis-absolute gkvis-bottom-0 gkvis-right-[-2px] gkvis-top-0 gkvis-w-2 gkvis-border-none gkvis-bg-transparent gkvis-cursor-ew-resize">'),X=a('<div class="gkvis-pointer-events-auto gkvis-absolute gkvis-bottom-[-2px] gkvis-left-0 gkvis-right-0 gkvis-h-2 gkvis-border-none gkvis-bg-transparent gkvis-cursor-ns-resize">'),Y=a('<div class="gkvis-pointer-events-auto gkvis-absolute gkvis-bottom-[-5px] gkvis-right-[-5px] gkvis-h-[12px] gkvis-w-[12px] gkvis-cursor-nwse-resize gkvis-rounded-full gkvis-border-[2.5px] gkvis-border-blue-400 gkvis-bg-white">');const j=s=>{const[i,{styleFormattedValue:n,history:g}]=e(),[a,y]=t(!1),p=()=>s.block,h=()=>i.documentState.canvasBuilder,m=(e,t,o)=>{const r=p().node.parentElement?.offsetWidth||0;if(o?.includes("%")){const o=e/r*100,s=t/r*100,i=v(Math.abs(Math.round(s+o)),0,100);p().setStyle("width",`${i}%`)}else{const o=v(Math.round(t+e),0,r);p().setStyle("width",`${o}px`)}},k=(e,t,o)=>{const r=p().node.parentElement?.offsetHeight||0;if(o?.includes("%")){const o=e/r*100,s=t/r*100,i=v(Math.abs(Math.round(s+o)),0,100);p().setStyle("height",`${i}%`)}else{const o=v(Math.round(t+e),0,r);p().setStyle("height",`${o}px`)}},b=(e,t)=>{const o=v(Math.round(t+.5*e),10,300);p().setStyle("font-size",l(o))},w=e=>{e.stopPropagation();const t=e.clientX,o=p().node.offsetHeight,r=p().node.offsetWidth,s=p().getStyle("width"),i=p().getStyle("height"),l=$()||0,n=document.body.style.cursor;document.body.style.cursor=window.getComputedStyle(e.target).cursor,y(!0);const d=e=>{g.pause(),c((()=>{const n=(e.clientX-t)/h().scale;if(p().isText&&!p().hasChildren())return b(n,l),e.preventDefault();m(n,r,s),e.shiftKey&&k(n,o,i),e.preventDefault()}))};document.addEventListener("mousemove",d),document.addEventListener("mouseup",(e=>{document.body.style.cursor=n,document.removeEventListener("mousemove",d),e.preventDefault(),y(!1),g.resume()}),{once:!0})},f=e=>{e.stopPropagation();const t=e.clientY,o=p().node.offsetHeight,r=p().node.offsetWidth,s=p().getStyle("width"),i=p().getStyle("height"),l=$()||0,n=document.body.style.cursor;document.body.style.cursor=window.getComputedStyle(e.target).cursor,y(!0);const d=e=>{g.pause(),c((()=>{const n=(e.clientY-t)/h().scale;if(p().isText&&!p().hasChildren())return b(n,l),e.preventDefault();k(n,o,i),e.shiftKey&&m(n,r,s)})),e.preventDefault()};document.addEventListener("mousemove",d),document.addEventListener("mouseup",(e=>{document.body.style.cursor=n,document.removeEventListener("mousemove",d),e.preventDefault(),y(!1),g.resume()}),{once:!0})},P=e=>{e.stopPropagation();const t=e.clientX,o=e.clientY,r=p().node.offsetHeight,s=p().node.offsetWidth,i=p().getStyle("width"),l=p().getStyle("height"),n=document.body.style.cursor,d=$()||0;document.body.style.cursor=window.getComputedStyle(e.target).cursor,y(!0);const a=e=>{g.pause(),c((()=>{const n=(e.clientX-t)/h().scale,g=(e.clientY-o)/h().scale;if(p().isText&&!p().hasChildren())return b(g,d),e.preventDefault();m(n,s,i),k(e.shiftKey?n:g,r,l)})),e.preventDefault()};document.addEventListener("mousemove",a),document.addEventListener("mouseup",(e=>{document.body.style.cursor=n,document.removeEventListener("mousemove",a),e.preventDefault(),y(!1),g.resume()}),{once:!0})},S=()=>(p().getStyle("width"),n(getComputedStyle(p().node).getPropertyValue("width"),i.documentState.page.UOM,!1,"",0)),x=()=>(p().getStyle("height"),n(getComputedStyle(p().node).getPropertyValue("height"),i.documentState.page.UOM,!1,"",0)),$=()=>(p().getStyle("font-size"),Math.round(u(getComputedStyle(p().node).getPropertyValue("font-size"))));return[r(d,{get when(){return a()},get children(){var e=B(),t=e.firstChild,s=t.nextSibling;return s.nextSibling,o(e,S,t),o(e,r(E,{class:"gkvis-size-5"}),s),o(e,x,null),e}}),(M=H(),M.$$mousedown=w,M),(C=X(),C.$$mousedown=f,C),r(d,{get when(){return!a()},get children(){var e=Y();return e.$$mousedown=P,e}})];var C,M};g(["mousedown"]);var K=a('<div class="gkvis-absolute gkvis-left-2 gkvis-top-2 gkvis-w-fit gkvis-rounded-full gkvis-bg-zinc-800 gkvis-px-3 gkvis-py-2 gkvis-text-xs gkvis-text-white gkvis-opacity-60"v-show=updating>'),O=a("<div>");const V=s=>{const[g,{history:a}]=e(),v=()=>s.block,y=()=>g.documentState.canvasBuilder;let p;const h=window.getComputedStyle(v().node),b=parseInt(h.width,10),w=parseInt(h.height,10),f=v().node.getBoundingClientRect(),P=Math.min(f.height,f.width)/2,S=Math.min(w,b)/2,x=()=>parseInt(v().getStyle("border-radius")||"0",10)||0;let $=10,C=10;const[E,L]=t(!1),[D,z]=t(10),[R,T]=t(10),I=e=>{const t=window.getComputedStyle(p),o=parseInt(t.height,10),r=parseInt(t.width,10),s=e/S;c((()=>{z(Math.max(C,P*s-o/2)),T(Math.max($,P*s-r/2))}))},B=()=>{y().scale,v().getStyle("height"),v().getStyle("width");const e=v().node.getBoundingClientRect();return u(e.height)>=25&&u(e.width)>=25};return m((()=>{I(x())})),(()=>{var e=O();e.$$mousedown=e=>(e=>{const t=e.clientX,o=e.clientY,r=window.getComputedStyle(p),s=parseInt(r.height,10),i=parseInt(r.width,10);let l=t,n=o;L(!0);const d=e=>{a.pause(),c((()=>{e.preventDefault();const t=(e.clientX-l+(e.clientY-n))/2*2;t<0&&(C=-s/2,$=-i/2);let o=Math.round(u(v().getStyle("border-radius"))+t);o=Math.max(0,Math.min(o,S)),I(o),v().setStyle("border-radius",`${o}px`)})),l=e.clientX,n=e.clientY};document.addEventListener("mousemove",d),document.addEventListener("mouseup",(e=>{e.preventDefault(),u(v().getStyle("border-radius"))<10&&c((()=>{T(10),z(10)})),L(!1),a.resume(),document.removeEventListener("mousemove",d)}),{once:!0}),e.stopPropagation()})(e);return"function"==typeof p?k(p,e):p=e,o(e,r(d,{get when(){return E()},get children(){var e=K();return o(e,x),e}})),i((t=>{var o=M("border-radius-resize gkvis-pointer-events-auto gkvis-absolute gkvis-left-2 gkvis-top-2 gkvis-h-[10px] gkvis-w-[10px] gkvis-cursor-pointer gkvis-rounded-full gkvis-border-2 gkvis-border-blue-400 gkvis-bg-white",{"gkvis-hidden":y().scale<.4||!B()}),r=l(D()),s=l(R());return o!==t.e&&n(e,t.e=o),r!==t.t&&(null!=(t.t=r)?e.style.setProperty("top",r):e.style.removeProperty("top")),s!==t.a&&(null!=(t.a=s)?e.style.setProperty("left",s):e.style.removeProperty("left")),t}),{e:void 0,t:void 0,a:void 0}),e})()};g(["mousedown"]);var W=a("<div>"),F=a('<div class="gkvis-m-auto gkvis-text-sm gkvis-text-yellow-900">'),J=a('<div><div class="margin-handler gkvis-pointer-events-none gkvis-absolute gkvis-flex gkvis-w-full gkvis-bg-yellow-100"></div><div class="margin-handler gkvis-pointer-events-none gkvis-absolute gkvis-bottom-0 gkvis-flex gkvis-w-full gkvis-bg-yellow-100"></div><div class="margin-handler gkvis-pointer-events-none gkvis-absolute gkvis-left-0 gkvis-flex gkvis-h-full gkvis-bg-yellow-100"></div><div class="margin-handler gkvis-pointer-events-none gkvis-absolute gkvis-right-0 gkvis-flex gkvis-h-full gkvis-bg-yellow-100">');const N=g=>{const[a,{history:y}]=e(),[p,h]=t(!1),m=()=>g.block,k=()=>a.documentState.canvasBuilder,b=()=>{m().getStyle("margin-top"),m().getStyle("display"),m().getStyle("margin");let e=window.getComputedStyle(m().node).marginTop;return u(e)*k().scale},w=()=>l(v(1*k().scale,1,2)),f=()=>{m().getStyle("margin-bottom"),m().getStyle("display"),m().getStyle("margin");let e=window.getComputedStyle(m().node).marginBottom;return u(e)*k().scale},P=()=>{m().getStyle("margin-left"),m().getStyle("display"),m().getStyle("margin");let e=window.getComputedStyle(m().node).marginLeft;return u(e)*k().scale},S=()=>{m().getStyle("margin-right"),m().getStyle("display"),m().getStyle("margin");let e=window.getComputedStyle(m().node).marginRight;return u(e)*k().scale},x=()=>{const e=v(16*k().scale,8,32);return{width:e,height:v(4*k().scale,2,8),bottom:`clamp(0px, calc(4px * ${k().scale}), 12px)`,left:`calc(50% - ${e/2}px)`}},$=()=>{const e=v(16*k().scale,8,32);return{width:e,height:v(4*k().scale,2,8),bottom:`clamp(-16px, calc(-8px * ${k().scale}), 2px)`,left:`calc(50% - ${e/2}px)`}},C=()=>{const e=v(4*k().scale,2,8),t=v(16*k().scale,8,32);return{width:e,height:t,right:`clamp(0px, calc(4px * ${k().scale}), 12px)`,top:`calc(50% - ${t/2}px)`}},E=()=>{const e=v(4*k().scale,2,8),t=v(16*k().scale,8,32);return{width:e,height:t,right:`clamp(-16px, calc(-8px * ${k().scale}), 2px)`,top:`calc(50% - ${t/2}px)`}},L=(e,t)=>{if(g.disableHandlers)return;h(!0);const o=e.clientY,r=e.clientX,i=e.target,n=u(m().getStyles["margin-top"])||0,d=u(m().getStyles["margin-bottom"])||0,a=u(m().getStyles["margin-left"])||0,v=u(m().getStyles["margin-right"])||0,p=document.body.style.cursor;document.body.style.cursor=window.getComputedStyle(i).cursor;const k=e=>{y.pause(),e.stopPropagation(),c((()=>{let i=0,g=null;t===s.Top?(i=Math.max(n+e.clientY-o,0),m().setStyle("margin-top",l(i)),g="y"):t===s.Bottom?(i=Math.max(d+e.clientY-o,0),m().setStyle("margin-bottom",l(i)),g="y"):t===s.Left?(i=Math.max(a+e.clientX-r,0),m().setStyle("margin-left",l(i)),g="x"):t===s.Right&&(i=Math.max(v+e.clientX-r,0),m().setStyle("margin-right",l(i)),g="x"),e.shiftKey?(m().setStyle("margin-top",l(i)),m().setStyle("margin-bottom",l(i)),m().setStyle("margin-left",l(i)),m().setStyle("margin-right",l(i))):e.altKey&&("y"===g?(m().setStyle("margin-top",l(i)),m().setStyle("margin-bottom",l(i))):"x"===g&&(m().setStyle("margin-left",l(i)),m().setStyle("margin-right",l(i))))})),e.preventDefault()};document.addEventListener("mousemove",k),document.addEventListener("mouseup",(e=>{y.resume(),document.body.style.cursor=p,document.removeEventListener("mousemove",k),h(!1),e.preventDefault()}),{once:!0})};return D=J(),z=D.firstChild,R=z.nextSibling,T=R.nextSibling,I=T.nextSibling,D.$$click=e=>e.preventDefault(),o(z,r(d,{get when(){return k().scale>.5},get children(){var e=W();return e.$$mousedown=e=>L(e,s.Top),i((t=>{var o=M("gkvis-pointer-events-auto gkvis-absolute gkvis-left-[50%] gkvis-rounded-full gkvis-border-2 gkvis-border-yellow-800 gkvis-bg-yellow-400 hover:gkvis-scale-125",{"gkvis-cursor-ns-resize":!g.disableHandlers,"gkvis-hidden":p()}),r=w(),s=x().bottom,i=x().left,d=l(x().height),a=l(x().width);return o!==t.e&&n(e,t.e=o),r!==t.t&&(null!=(t.t=r)?e.style.setProperty("border-width",r):e.style.removeProperty("border-width")),s!==t.a&&(null!=(t.a=s)?e.style.setProperty("bottom",s):e.style.removeProperty("bottom")),i!==t.o&&(null!=(t.o=i)?e.style.setProperty("left",i):e.style.removeProperty("left")),d!==t.i&&(null!=(t.i=d)?e.style.setProperty("height",d):e.style.removeProperty("height")),a!==t.n&&(null!=(t.n=a)?e.style.setProperty("width",a):e.style.removeProperty("width")),t}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),o(z,r(d,{get when(){return p()},get children(){var e=F();return o(e,(()=>m().getStyles["margin-top"]||"auto")),e}}),null),o(R,r(d,{get when(){return k().scale>.5},get children(){var e=W();return e.$$mousedown=e=>L(e,s.Bottom),i((t=>{var o=M("gkvis-pointer-events-auto gkvis-absolute gkvis-left-[50%] gkvis-rounded-full gkvis-border-2 gkvis-border-yellow-800 gkvis-bg-yellow-400 hover:gkvis-scale-125",{"gkvis-cursor-ns-resize":!g.disableHandlers,"gkvis-hidden":p()}),r=w(),s=$().bottom,i=$().left,d=l($().height),a=l($().width);return o!==t.e&&n(e,t.e=o),r!==t.t&&(null!=(t.t=r)?e.style.setProperty("border-width",r):e.style.removeProperty("border-width")),s!==t.a&&(null!=(t.a=s)?e.style.setProperty("bottom",s):e.style.removeProperty("bottom")),i!==t.o&&(null!=(t.o=i)?e.style.setProperty("left",i):e.style.removeProperty("left")),d!==t.i&&(null!=(t.i=d)?e.style.setProperty("height",d):e.style.removeProperty("height")),a!==t.n&&(null!=(t.n=a)?e.style.setProperty("width",a):e.style.removeProperty("width")),t}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),o(R,r(d,{get when(){return p()},get children(){var e=F();return o(e,(()=>m().getStyles["margin-bottom"]||"auto")),e}}),null),o(T,r(d,{get when(){return k().scale>.5},get children(){var e=W();return e.$$mousedown=e=>L(e,s.Left),i((t=>{var o=M("gkvis-pointer-events-auto gkvis-absolute gkvis-top-[50%] gkvis-rounded-full gkvis-border-2 gkvis-border-yellow-800 gkvis-bg-yellow-400 hover:gkvis-scale-125",{"gkvis-cursor-ew-resize":!g.disableHandlers,"gkvis-hidden":p()}),r=w(),s=C().right,i=C().top,d=l(C().height),a=l(C().width);return o!==t.e&&n(e,t.e=o),r!==t.t&&(null!=(t.t=r)?e.style.setProperty("border-width",r):e.style.removeProperty("border-width")),s!==t.a&&(null!=(t.a=s)?e.style.setProperty("right",s):e.style.removeProperty("right")),i!==t.o&&(null!=(t.o=i)?e.style.setProperty("top",i):e.style.removeProperty("top")),d!==t.i&&(null!=(t.i=d)?e.style.setProperty("height",d):e.style.removeProperty("height")),a!==t.n&&(null!=(t.n=a)?e.style.setProperty("width",a):e.style.removeProperty("width")),t}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),o(T,r(d,{get when(){return p()},get children(){var e=F();return o(e,(()=>m().getStyles["margin-left"]||"auto")),e}}),null),o(I,r(d,{get when(){return k().scale>.5},get children(){var e=W();return e.$$mousedown=e=>L(e,s.Right),i((t=>{var o=M("gkvis-pointer-events-auto gkvis-absolute gkvis-top-[50%] gkvis-rounded-full gkvis-border-2 gkvis-border-yellow-800 gkvis-bg-yellow-400 hover:gkvis-scale-125",{"gkvis-cursor-ew-resize":!g.disableHandlers,"gkvis-hidden":p()}),r=w(),s=E().right,i=E().top,d=l(E().height),a=l(E().width);return o!==t.e&&n(e,t.e=o),r!==t.t&&(null!=(t.t=r)?e.style.setProperty("border-width",r):e.style.removeProperty("border-width")),s!==t.a&&(null!=(t.a=s)?e.style.setProperty("right",s):e.style.removeProperty("right")),i!==t.o&&(null!=(t.o=i)?e.style.setProperty("top",i):e.style.removeProperty("top")),d!==t.i&&(null!=(t.i=d)?e.style.setProperty("height",d):e.style.removeProperty("height")),a!==t.n&&(null!=(t.n=a)?e.style.setProperty("width",a):e.style.removeProperty("width")),t}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e}}),null),o(I,r(d,{get when(){return p()},get children(){var e=F();return o(e,(()=>m().getStyles["margin-right"]||"auto")),e}}),null),i((e=>{var t=M("group",{"opacity-40":!p(),"opacity-70":p()}),o=l(b()),r=`calc(0% - ${l(b())})`,s=l(f()),i=`calc(0% - ${l(f())})`,d=l(P()),g=`calc(0% - ${l(P())})`,a=l(S()),v=`calc(0% - ${l(S())})`;return t!==e.e&&n(D,e.e=t),o!==e.t&&(null!=(e.t=o)?z.style.setProperty("height",o):z.style.removeProperty("height")),r!==e.a&&(null!=(e.a=r)?z.style.setProperty("top",r):z.style.removeProperty("top")),s!==e.o&&(null!=(e.o=s)?R.style.setProperty("height",s):R.style.removeProperty("height")),i!==e.i&&(null!=(e.i=i)?R.style.setProperty("bottom",i):R.style.removeProperty("bottom")),d!==e.n&&(null!=(e.n=d)?T.style.setProperty("width",d):T.style.removeProperty("width")),g!==e.s&&(null!=(e.s=g)?T.style.setProperty("left",g):T.style.removeProperty("left")),a!==e.h&&(null!=(e.h=a)?I.style.setProperty("width",a):I.style.removeProperty("width")),v!==e.r&&(null!=(e.r=v)?I.style.setProperty("right",v):I.style.removeProperty("right")),e}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),D;var D,z,R,T,I};function U(o){const[s]=b(o,["block"]),[,{deleteElement:i,duplicateElement:n,addColumnToTable:g}]=e(),a=L(),[v,u]=function({key:e,defaultValue:o}){const r=sessionStorage.getItem(e),s=null!==r?JSON.parse(r):o,[i,l]=t(s);return p((()=>{sessionStorage.setItem(e,JSON.stringify(i()))})),[i,l]}({key:"copiedElementStyle",defaultValue:{elementId:"",style:{}}});let c;m((()=>{((e,o)=>{const[r,s]=t(y(e)),i=D((()=>window&&"MutationObserver"in window));let n;const d=()=>{s(y(e))};p((()=>{const t="function"==typeof(o=e)?o():o;var o;i()&&window&&t&&(d(),n=new MutationObserver(g),n.observe(t,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"],characterData:!0}),h((()=>{n&&(n.disconnect(),n=void 0)})))}));const g=()=>{d()};p((()=>{o.style.width=l(r().width,!1),o.style.height=l(r().height,!1),o.style.top=l(r().top,!1),o.style.left=l(r().left,!1)}))})(s.block.node,c)}));const k=e=>{if(!o.block.isEditable()){if(s.block.isText){c.classList.add("gkvis-pointer-events-none")}s.block.handleClick(e)}},E=[{label:"Copy Style",action:()=>{u({elementId:o.block.id.toString(),style:o.block.getStyles})}},{label:"Paste Style",action:()=>{o.block.updateStyles(v().style)},condition:()=>Boolean(v().elementId&&v().elementId.toString()!==s.block.id)},{label:"Duplicate",action:()=>{n(s.block.id)},condition:()=>!o.block.isRoot&&!o.block.isRepeater&&!["thead","tbody"].includes(o.block.getTag())},{label:"Repeat Element",action:()=>{o.block.setRepeater(!0)},condition:()=>!o.block.isRoot&&!o.block.isRepeater&&!["thead"].includes(o.block.getTag())},{label:"Insert Column Left",action:()=>{g(o.block.id,"left")},condition:()=>"th"===o.block.getTag()},{label:"Insert Column Right",action:()=>{g(o.block.id,"right")},condition:()=>"th"===o.block.getTag()},{label:"Delete",action:()=>{i(s.block.id)},condition:()=>!o.block.isRoot}];return r(C,{get children(){return[r(P,{as:"div",ref(e){"function"==typeof c?c(e):c=e},get class(){return M("gkvis-fixed gkvis-z-[15] gkvis-box-content gkvis-select-none gkvis-ring-2 gkvis-ring-inset",s.block.isRoot?"gkvis-pointer-events-none gkvis-ring-yellow-400":"gkvis-ring-inset")},get"aria-selected"(){return s.block.isActiveElement},onClick:k,get onDblClick(){return s.block.handleDoubleClick},get children(){return r(d,{get when(){return w((()=>!s.block.isEditable()))()&&!a.multipleBlocksSelected()},get children(){return[r(I,{get block(){return s.block}}),r(d,{get when(){return!s.block.isRoot},get children(){return[r(N,{get block(){return s.block}}),r(V,{get block(){return s.block}}),r(j,{get block(){return s.block}})]}})]}})}}),r(d,{get when(){return!s.block.isRoot},get children(){return r(S,{get children(){return r(x,{class:"gkvis-w-48 focus-visible:gkvis-outline-0",get children(){return r(f,{each:E,children:e=>r(d,{get when(){return!e.condition||e.condition()},get children(){return r($,{onSelect:()=>e.action(),get children(){return e.label}})}})})}})}})}})]}})}g(["click","mousedown"]);export{U as default};
